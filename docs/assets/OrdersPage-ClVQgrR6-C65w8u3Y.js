import{u as y,G as j,j as d,x as e,b as m,o as N}from"./index-KYK8dnUx.js";function w(){const{orderId:n}=y(),{user:c,isDarkMode:s}=j(),[x,o]=d.useState([]),[r,u]=d.useState(null),[b,g]=d.useState(!0);d.useEffect(()=>{(()=>{g(!0);const t=JSON.parse(localStorage.getItem("orders")||"[]"),i=c?t.filter(l=>l.userId===c.id):t;if(o(i),n){const l=i.find(a=>a.id===n);u(l)}g(!1)})()},[c,n]);const h=t=>{const i={preparing:{label:"Hazırlanıyor",color:"bg-yellow-100 text-yellow-800",icon:"ri-time-line",description:"Siparişiniz hazırlanmaya başlandı"},shipped:{label:"Kargoda",color:"bg-blue-100 text-blue-800",icon:"ri-truck-line",description:"Siparişiniz kargoya verildi"},delivered:{label:"Teslim Edildi",color:"bg-green-100 text-green-800",icon:"ri-check-line",description:"Siparişiniz başarıyla teslim edildi"},cancelled:{label:"İptal Edildi",color:"bg-red-100 text-red-800",icon:"ri-close-line",description:"Sipariş iptal edildi"},returned:{label:"İade Edildi",color:"bg-gray-100 text-gray-800",icon:"ri-arrow-go-back-line",description:"Sipariş iade edildi"}};return i[t]||i.preparing},p=t=>{const i=x.map(a=>a.id===t?{...a,returnRequested:!0,returnRequestDate:new Date().toISOString()}:a);o(i);const l=JSON.parse(localStorage.getItem("orders")||"[]").map(a=>a.id===t?{...a,returnRequested:!0,returnRequestDate:new Date().toISOString()}:a);localStorage.setItem("orders",JSON.stringify(l)),N.success("İade talebi gönderildi. En kısa sürede değerlendirilecektir.")};if(b)return e.jsx("div",{className:`min-h-screen flex items-center justify-center ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(r){const t=h(r.status);return e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-gray-50"} py-8`,children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(m,{to:"/orders",className:`inline-flex items-center text-sm ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"} cursor-pointer whitespace-nowrap`,children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Siparişlerime Dön"]})}),e.jsxs("div",{className:`rounded-lg ${s?"bg-gray-800":"bg-white"} shadow-sm p-6 mb-6`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Sipariş Detayı"}),e.jsxs("p",{className:`text-sm mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:["Sipariş No: ",r.trackingNumber]})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.color}`,children:[e.jsx("i",{className:`${t.icon} mr-1`}),t.label]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:`text-lg font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Sipariş Durumu"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${["preparing","shipped","delivered"].includes(r.status)?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:e.jsx("i",{className:"ri-time-line"})}),e.jsx("div",{className:`flex-1 h-1 ${["shipped","delivered"].includes(r.status)?"bg-blue-600":"bg-gray-300"}`}),e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${["shipped","delivered"].includes(r.status)?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:e.jsx("i",{className:"ri-truck-line"})}),e.jsx("div",{className:`flex-1 h-1 ${r.status==="delivered"?"bg-blue-600":"bg-gray-300"}`}),e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${r.status==="delivered"?"bg-green-600 text-white":"bg-gray-300 text-gray-600"}`,children:e.jsx("i",{className:"ri-check-line"})})]}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-500",children:"Hazırlanıyor"}),e.jsx("span",{className:s?"text-gray-400":"text-gray-500",children:"Kargoda"}),e.jsx("span",{className:s?"text-gray-400":"text-gray-500",children:"Teslim Edildi"})]}),e.jsx("p",{className:`mt-4 text-sm ${s?"text-gray-300":"text-gray-600"}`,children:t.description})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:`text-lg font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Sipariş Edilen Ürünler"}),e.jsx("div",{className:"space-y-4",children:r.items.map(i=>e.jsxs("div",{className:`flex items-center space-x-4 p-4 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:i.name}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:["Adet: ",i.quantity]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:[(i.price*i.quantity).toFixed(2),"₺"]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:[i.price.toFixed(2),"₺ / adet"]})]})]},i.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:`text-lg font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Teslimat Bilgileri"}),e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("p",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:[r.shippingAddress.firstName," ",r.shippingAddress.lastName]}),e.jsx("p",{className:`text-sm mt-1 ${s?"text-gray-300":"text-gray-600"}`,children:r.shippingAddress.address}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:[r.shippingAddress.district,", ",r.shippingAddress.city," ",r.shippingAddress.postalCode]})]})]}),e.jsxs("div",{className:`border-t pt-6 ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-lg font-semibold ${s?"text-white":"text-gray-900"}`,children:"Toplam Tutar"}),e.jsxs("span",{className:`text-xl font-bold ${s?"text-white":"text-gray-900"}`,children:[r.total.toFixed(2),"₺"]})]}),e.jsxs("p",{className:`text-sm mt-1 ${s?"text-gray-400":"text-gray-500"}`,children:["Sipariş Tarihi: ",new Date(r.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),r.status==="delivered"&&!r.returnRequested&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>p(r.id),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-go-back-line mr-2"}),"İade Talebi Oluştur"]})}),r.returnRequested&&e.jsxs("div",{className:`mt-6 pt-6 border-t p-4 rounded-lg ${s?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200"} border`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-information-line text-yellow-600"}),e.jsx("span",{className:`font-medium ${s?"text-yellow-300":"text-yellow-800"}`,children:"İade Talebi Gönderildi"})]}),e.jsxs("p",{className:`text-sm mt-1 ${s?"text-yellow-400":"text-yellow-700"}`,children:["İade talebiniz ",new Date(r.returnRequestDate).toLocaleDateString("tr-TR")," tarihinde gönderildi. En kısa sürede değerlendirilecektir."]})]})]})]})})}return e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-gray-50"} py-8`,children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:`text-2xl font-bold mb-8 ${s?"text-white":"text-gray-900"}`,children:"Siparişlerim"}),x.length>0?e.jsx("div",{className:"space-y-6",children:x.map(t=>{const i=h(t.status);return e.jsxs("div",{className:`rounded-lg ${s?"bg-gray-800":"bg-white"} shadow-sm p-6`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:["Sipariş No: ",t.trackingNumber]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:new Date(t.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"mt-2 sm:mt-0 flex items-center space-x-4",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.color}`,children:[e.jsx("i",{className:`${i.icon} mr-1`}),i.label]}),e.jsxs("span",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:[t.total.toFixed(2),"₺"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[t.items.slice(0,3).map((l,a)=>e.jsx("img",{src:l.image,alt:l.name,className:"w-12 h-12 object-cover rounded-lg"},a)),t.items.length>3&&e.jsxs("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-xs font-medium ${s?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:["+",t.items.length-3]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:[t.items.length," ürün • ",i.description]}),e.jsxs("div",{className:"mt-2 sm:mt-0 flex space-x-2",children:[e.jsxs(m,{to:`/orders/${t.id}`,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line mr-1"}),"Detayları Gör"]}),t.status==="delivered"&&!t.returnRequested&&e.jsxs("button",{onClick:()=>p(t.id),className:"px-4 py-2 text-sm border border-red-600 text-red-600 rounded-lg hover:bg-red-50 cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-go-back-line mr-1"}),"İade Et"]})]})]}),t.returnRequested&&e.jsx("div",{className:`mt-4 p-3 rounded-lg ${s?"bg-yellow-900/20":"bg-yellow-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-information-line text-yellow-600 text-sm"}),e.jsx("span",{className:`text-sm font-medium ${s?"text-yellow-300":"text-yellow-800"}`,children:"İade talebi gönderildi"})]})})]},t.id)})}):e.jsxs("div",{className:`text-center py-12 ${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm`,children:[e.jsx("i",{className:`ri-shopping-bag-line text-4xl mb-4 ${s?"text-gray-600":"text-gray-400"}`}),e.jsx("h3",{className:`text-lg font-medium mb-2 ${s?"text-gray-300":"text-gray-500"}`,children:"Henüz siparişiniz yok"}),e.jsx("p",{className:"text-sm mb-6 text-gray-400",children:"İlk siparişinizi vermek için alışverişe başlayın"}),e.jsx(m,{to:"/",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 cursor-pointer whitespace-nowrap",children:"Alışverişe Başla"})]})]})})}export{w as default};
