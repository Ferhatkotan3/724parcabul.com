{"version":3,"file":"SearchPage-D_LFbWmU.js","sources":["../../src/pages/search/SearchPage.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { useSearchParams, Link } from 'react-router-dom';\nimport { useStore } from '../../store/useStore';\nimport ProductCard from '../../components/product/ProductCard';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\nimport { mockProducts } from '../../mocks/products';\n\nexport default function SearchPage() {\n  const [searchParams] = useSearchParams();\n  const { isDarkMode } = useStore();\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [sortBy, setSortBy] = useState('relevance');\n  \n  const query = searchParams.get('q') || '';\n\n  useEffect(() => {\n    const performSearch = () => {\n      setIsLoading(true);\n      \n      if (!query.trim()) {\n        setSearchResults([]);\n        setIsLoading(false);\n        return;\n      }\n\n      // Arama algoritması - parça kodu, isim, kategori ve açıklamada arama\n      const results = mockProducts.filter(product => {\n        const searchTerm = query.toLowerCase().trim();\n        const productName = product.name.toLowerCase();\n        const productCode = product.part_code?.toLowerCase() || '';\n        const productDescription = product.description.toLowerCase();\n\n        return (\n          productName.includes(searchTerm) ||\n          productCode.includes(searchTerm) ||\n          productDescription.includes(searchTerm) ||\n          // Parça numarası için özel arama\n          productCode.replace(/[-\\s]/g, '').includes(searchTerm.replace(/[-\\s]/g, ''))\n        );\n      });\n\n      // Sıralama\n      let sortedResults = [...results];\n      switch (sortBy) {\n        case 'price-low':\n          sortedResults.sort((a, b) => a.price - b.price);\n          break;\n        case 'price-high':\n          sortedResults.sort((a, b) => b.price - a.price);\n          break;\n        case 'name':\n          sortedResults.sort((a, b) => a.name.localeCompare(b.name, 'tr'));\n          break;\n        case 'newest':\n          sortedResults.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n          break;\n        default:\n          // Relevance - exact matches first\n          sortedResults.sort((a, b) => {\n            const aExact = a.name.toLowerCase().includes(query.toLowerCase()) ? 1 : 0;\n            const bExact = b.name.toLowerCase().includes(query.toLowerCase()) ? 1 : 0;\n            return bExact - aExact;\n          });\n      }\n\n      setSearchResults(sortedResults);\n      setIsLoading(false);\n    };\n\n    performSearch();\n  }, [query, sortBy]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`min-h-screen ${isDarkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Search Header */}\n        <div className=\"mb-8\">\n          <h1 className={`text-2xl font-bold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n            Arama Sonuçları\n          </h1>\n          {query && (\n            <p className={`text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n              \"<span className=\"font-medium\">{query}</span>\" için {searchResults.length} sonuç bulundu\n            </p>\n          )}\n        </div>\n\n        {/* Filters and Sort */}\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6\">\n          <div className=\"flex flex-wrap gap-2\">\n            <span className={`text-sm font-medium ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              Filtreler:\n            </span>\n            <button className=\"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200 cursor-pointer whitespace-nowrap\">\n              Tüm Kategoriler\n            </button>\n            <button className=\"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 cursor-pointer whitespace-nowrap\">\n              Stokta Var\n            </button>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <span className={`text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              Sırala:\n            </span>\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value)}\n              className={`px-3 py-1 text-sm border rounded-lg pr-8 cursor-pointer ${\n                isDarkMode \n                  ? 'bg-gray-800 border-gray-600 text-white' \n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-blue-500 focus:border-transparent`}\n            >\n              <option value=\"relevance\">İlgili</option>\n              <option value=\"price-low\">Fiyat (Düşük-Yüksek)</option>\n              <option value=\"price-high\">Fiyat (Yüksek-Düşük)</option>\n              <option value=\"name\">İsim (A-Z)</option>\n              <option value=\"newest\">En Yeni</option>\n            </select>\n          </div>\n        </div>\n\n        {/* Search Results */}\n        {searchResults.length > 0 ? (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {searchResults.map((product) => (\n              <ProductCard key={product.id} product={product} />\n            ))}\n          </div>\n        ) : query ? (\n          <div className={`text-center py-12 ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n            <i className=\"ri-search-line text-4xl mb-4 opacity-50\"></i>\n            <h3 className=\"text-lg font-medium mb-2\">Sonuç bulunamadı</h3>\n            <p className=\"text-sm mb-4\">\n              \"<span className=\"font-medium\">{query}</span>\" için hiçbir ürün bulunamadı.\n            </p>\n            <div className=\"space-y-2 text-sm\">\n              <p>Öneriler:</p>\n              <ul className=\"list-disc list-inside space-y-1 text-left max-w-md mx-auto\">\n                <li>Yazım hatası olup olmadığını kontrol edin</li>\n                <li>Daha genel terimler kullanın</li>\n                <li>Parça kodunu tam olarak yazın</li>\n                <li>Farklı anahtar kelimeler deneyin</li>\n              </ul>\n            </div>\n            <Link\n              to=\"/categories\"\n              className=\"inline-block mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer whitespace-nowrap\"\n            >\n              Kategorilere Göz At\n            </Link>\n          </div>\n        ) : (\n          <div className={`text-center py-12 ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n            <i className=\"ri-search-line text-4xl mb-4 opacity-50\"></i>\n            <h3 className=\"text-lg font-medium mb-2\">Arama yapın</h3>\n            <p className=\"text-sm\">\n              Parça kodu, ürün adı veya kategori ile arama yapabilirsiniz.\n            </p>\n          </div>\n        )}\n\n        {/* Popular Searches */}\n        {!query && (\n          <div className=\"mt-12\">\n            <h2 className={`text-lg font-semibold mb-4 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n              Popüler Aramalar\n            </h2>\n            <div className=\"flex flex-wrap gap-2\">\n              {[\n                'motor parçası',\n                'fren balata',\n                'amortisör',\n                'alternatör',\n                'hava filtresi',\n                'motor yağı',\n                'fren diski',\n                'lastik'\n              ].map((term) => (\n                <Link\n                  key={term}\n                  to={`/search?q=${encodeURIComponent(term)}`}\n                  className={`px-4 py-2 text-sm rounded-lg border cursor-pointer whitespace-nowrap ${\n                    isDarkMode\n                      ? 'border-gray-600 text-gray-300 hover:bg-gray-800'\n                      : 'border-gray-300 text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  {term}\n                </Link>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["SearchPage","searchParams","useSearchParams","isDarkMode","useStore","searchResults","setSearchResults","useState","isLoading","setIsLoading","sortBy","setSortBy","query","useEffect","sortedResults","mockProducts","product","searchTerm","productName","productCode","productDescription","b","aExact","jsx","LoadingSpinner","jsxs","e","ProductCard","Link","term"],"mappings":"uKAQA,SAAwBA,GAAa,CACnC,KAAM,CAACC,CAAY,EAAIC,EAAA,EACjB,CAAE,WAAAC,CAAA,EAAeC,EAAA,EACjB,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAAgB,CAAA,CAAE,EACtD,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAS,EAAI,EACzC,CAACG,EAAQC,CAAS,EAAIJ,EAAAA,SAAS,WAAW,EAE1CK,EAAQX,EAAa,IAAI,GAAG,GAAK,GA2DvC,OAzDAY,EAAAA,UAAU,IAAM,EACQ,IAAM,CAG1B,GAFAJ,EAAa,EAAI,EAEb,CAACG,EAAM,OAAQ,CACjBN,EAAiB,CAAA,CAAE,EACnBG,EAAa,EAAK,EAClB,MACF,CAmBA,IAAIK,EAAgB,CAAC,GAhBLC,EAAa,OAAOC,GAAW,CAC7C,MAAMC,EAAaL,EAAM,YAAA,EAAc,KAAA,EACjCM,EAAcF,EAAQ,KAAK,YAAA,EAC3BG,EAAcH,EAAQ,WAAW,YAAA,GAAiB,GAClDI,EAAqBJ,EAAQ,YAAY,YAAA,EAE/C,OACEE,EAAY,SAASD,CAAU,GAC/BE,EAAY,SAASF,CAAU,GAC/BG,EAAmB,SAASH,CAAU,GAEtCE,EAAY,QAAQ,SAAU,EAAE,EAAE,SAASF,EAAW,QAAQ,SAAU,EAAE,CAAC,CAE/E,CAAC,CAG8B,EAC/B,OAAQP,EAAA,CACN,IAAK,YACHI,EAAc,KAAK,CAAC,EAAGO,IAAM,EAAE,MAAQA,EAAE,KAAK,EAC9C,MACF,IAAK,aACHP,EAAc,KAAK,CAAC,EAAGO,IAAMA,EAAE,MAAQ,EAAE,KAAK,EAC9C,MACF,IAAK,OACHP,EAAc,KAAK,CAAC,EAAGO,IAAM,EAAE,KAAK,cAAcA,EAAE,KAAM,IAAI,CAAC,EAC/D,MACF,IAAK,SACHP,EAAc,KAAK,CAAC,EAAGO,IAAM,IAAI,KAAKA,EAAE,UAAU,EAAE,QAAA,EAAY,IAAI,KAAK,EAAE,UAAU,EAAE,SAAS,EAChG,MACF,QAEEP,EAAc,KAAK,CAAC,EAAGO,IAAM,CAC3B,MAAMC,EAAS,EAAE,KAAK,YAAA,EAAc,SAASV,EAAM,YAAA,CAAa,EAAI,EAAI,EAExE,OADeS,EAAE,KAAK,YAAA,EAAc,SAAST,EAAM,YAAA,CAAa,EAAI,EAAI,GACxDU,CAClB,CAAC,CAAA,CAGLhB,EAAiBQ,CAAa,EAC9BL,EAAa,EAAK,CACpB,GAEA,CACF,EAAG,CAACG,EAAOF,CAAM,CAAC,EAEdF,QAEC,MAAA,CAAI,UAAU,gDACb,SAAAe,MAACC,IAAe,EAClB,EAKFD,EAAAA,IAAC,MAAA,CAAI,UAAW,gBAAgBpB,EAAa,cAAgB,YAAY,GACvE,SAAAsB,OAAC,MAAA,CAAI,UAAU,8CAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAF,EAAAA,IAAC,MAAG,UAAW,2BAA2BpB,EAAa,aAAe,eAAe,GAAI,SAAA,iBAAA,CAEzF,EACCS,UACE,IAAA,CAAE,UAAW,WAAWT,EAAa,gBAAkB,eAAe,GAAI,SAAA,CAAA,IACxEoB,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,SAAAX,EAAM,EAAO,UAAQP,EAAc,OAAO,gBAAA,CAAA,CAC5E,CAAA,EAEJ,EAGAoB,EAAAA,KAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAF,EAAAA,IAAC,QAAK,UAAW,uBAAuBpB,EAAa,gBAAkB,eAAe,GAAI,SAAA,YAAA,CAE1F,EACAoB,EAAAA,IAAC,SAAA,CAAO,UAAU,8GAA8G,SAAA,kBAEhI,EACAA,EAAAA,IAAC,SAAA,CAAO,UAAU,8GAA8G,SAAA,YAAA,CAEhI,CAAA,EACF,EAEAE,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAAC,QAAK,UAAW,WAAWpB,EAAa,gBAAkB,eAAe,GAAI,SAAA,SAAA,CAE9E,EACAsB,EAAAA,KAAC,SAAA,CACC,MAAOf,EACP,SAAWgB,GAAMf,EAAUe,EAAE,OAAO,KAAK,EACzC,UAAW,2DACTvB,EACI,yCACA,wCACN,6DAEA,SAAA,CAAAoB,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,SAAM,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,uBAAoB,EAC9CA,EAAAA,IAAC,SAAA,CAAO,MAAM,aAAa,SAAA,uBAAoB,EAC/CA,EAAAA,IAAC,SAAA,CAAO,MAAM,OAAO,SAAA,aAAU,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAA,CAAO,CAAA,CAAA,CAAA,CAChC,CAAA,CACF,CAAA,EACF,EAGClB,EAAc,OAAS,EACtBkB,EAAAA,IAAC,MAAA,CAAI,UAAU,sEACZ,SAAAlB,EAAc,IAAKW,GAClBO,EAAAA,IAACI,EAAA,CAA6B,QAAAX,CAAA,EAAZA,EAAQ,EAAsB,CACjD,CAAA,CACH,EACEJ,EACFa,EAAAA,KAAC,MAAA,CAAI,UAAW,qBAAqBtB,EAAa,gBAAkB,eAAe,GACjF,SAAA,CAAAoB,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAAA,CAA0C,EACvDA,EAAAA,IAAC,KAAA,CAAG,UAAU,2BAA2B,SAAA,mBAAgB,EACzDE,EAAAA,KAAC,IAAA,CAAE,UAAU,eAAe,SAAA,CAAA,IACzBF,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,SAAAX,EAAM,EAAO,gCAAA,EAC/C,EACAa,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAF,EAAAA,IAAC,KAAE,SAAA,WAAA,CAAS,EACZE,EAAAA,KAAC,KAAA,CAAG,UAAU,6DACZ,SAAA,CAAAF,EAAAA,IAAC,MAAG,SAAA,2CAAA,CAAyC,EAC7CA,EAAAA,IAAC,MAAG,SAAA,8BAAA,CAA4B,EAChCA,EAAAA,IAAC,MAAG,SAAA,+BAAA,CAA6B,EACjCA,EAAAA,IAAC,MAAG,SAAA,kCAAA,CAAgC,CAAA,CAAA,CACtC,CAAA,EACF,EACAA,EAAAA,IAACK,EAAA,CACC,GAAG,cACH,UAAU,mHACX,SAAA,qBAAA,CAAA,CAED,CAAA,CACF,SAEC,MAAA,CAAI,UAAW,qBAAqBzB,EAAa,gBAAkB,eAAe,GACjF,SAAA,CAAAoB,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAAA,CAA0C,EACvDA,EAAAA,IAAC,KAAA,CAAG,UAAU,2BAA2B,SAAA,cAAW,EACpDA,EAAAA,IAAC,IAAA,CAAE,UAAU,UAAU,SAAA,8DAAA,CAEvB,CAAA,EACF,EAID,CAACX,GACAa,EAAAA,KAAC,MAAA,CAAI,UAAU,QACb,SAAA,CAAAF,EAAAA,IAAC,MAAG,UAAW,8BAA8BpB,EAAa,aAAe,eAAe,GAAI,SAAA,kBAAA,CAE5F,EACAoB,EAAAA,IAAC,MAAA,CAAI,UAAU,uBACZ,SAAA,CACC,gBACA,cACA,YACA,aACA,gBACA,aACA,aACA,QAAA,EACA,IAAKM,GACLN,EAAAA,IAACK,EAAA,CAEC,GAAI,aAAa,mBAAmBC,CAAI,CAAC,GACzC,UAAW,wEACT1B,EACI,kDACA,gDACN,GAEC,SAAA0B,CAAA,EARIA,CAAA,CAUR,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAEJ"}