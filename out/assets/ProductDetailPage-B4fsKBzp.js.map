{"version":3,"file":"ProductDetailPage-B4fsKBzp.js","sources":["../../src/pages/product/ProductDetailPage.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { useStore } from '../../store/useStore';\nimport { supabase } from '../../lib/supabase';\nimport toast from 'react-hot-toast';\n\ninterface Product {\n  id: string;\n  part_code: string;\n  name: string;\n  description: string;\n  price: number;\n  stock: number;\n  image_url: string;\n  category_id: string;\n}\n\nexport default function ProductDetailPage() {\n  const { id } = useParams<{ id: string }>();\n  const { isDarkMode, addToCart } = useStore();\n  const [product, setProduct] = useState<Product | null>(null);\n  const [quantity, setQuantity] = useState(1);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (id) {\n      fetchProduct();\n    }\n  }, [id]);\n\n  const fetchProduct = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('products')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) throw error;\n      setProduct(data);\n    } catch (error) {\n      console.error('Error fetching product:', error);\n      toast.error('Ürün bulunamadı');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddToCart = () => {\n    if (!product) return;\n    \n    if (product.stock <= 0) {\n      toast.error('Bu ürün stokta bulunmuyor');\n      return;\n    }\n\n    if (quantity > product.stock) {\n      toast.error('Stok miktarından fazla ürün seçemezsiniz');\n      return;\n    }\n\n    for (let i = 0; i < quantity; i++) {\n      addToCart({\n        id: product.id,\n        part_code: product.part_code,\n        name: product.name,\n        price: product.price,\n        image_url: product.image_url,\n        stock: product.stock,\n      });\n    }\n    \n    toast.success(`${quantity} adet ürün sepete eklendi`);\n  };\n\n  if (loading) {\n    return (\n      <div className={`min-h-screen ${isDarkMode ? 'bg-gray-900' : 'bg-white'} py-8`}>\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"animate-pulse\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              <div className=\"aspect-square bg-gray-300 rounded-lg\"></div>\n              <div className=\"space-y-4\">\n                <div className=\"h-8 bg-gray-300 rounded w-3/4\"></div>\n                <div className=\"h-4 bg-gray-300 rounded w-1/4\"></div>\n                <div className=\"h-6 bg-gray-300 rounded w-1/3\"></div>\n                <div className=\"space-y-2\">\n                  <div className=\"h-4 bg-gray-300 rounded\"></div>\n                  <div className=\"h-4 bg-gray-300 rounded w-5/6\"></div>\n                  <div className=\"h-4 bg-gray-300 rounded w-4/6\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className={`min-h-screen ${isDarkMode ? 'bg-gray-900' : 'bg-white'} py-8`}>\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h1 className={`text-2xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\n            Ürün Bulunamadı\n          </h1>\n          <Link\n            to=\"/\"\n            className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700\"\n          >\n            Ana Sayfaya Dön\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`min-h-screen ${isDarkMode ? 'bg-gray-900' : 'bg-white'} py-8`}>\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Breadcrumb */}\n        <nav className=\"mb-8\">\n          <ol className=\"flex items-center space-x-2 text-sm\">\n            <li>\n              <Link to=\"/\" className={`${isDarkMode ? 'text-gray-400 hover:text-white' : 'text-gray-500 hover:text-gray-900'}`}>\n                Ana Sayfa\n              </Link>\n            </li>\n            <li>\n              <i className={`ri-arrow-right-s-line ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}></i>\n            </li>\n            <li>\n              <Link to=\"/products\" className={`${isDarkMode ? 'text-gray-400 hover:text-white' : 'text-gray-500 hover:text-gray-900'}`}>\n                Ürünler\n              </Link>\n            </li>\n            <li>\n              <i className={`ri-arrow-right-s-line ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}></i>\n            </li>\n            <li className={`${isDarkMode ? 'text-white' : 'text-gray-900'} font-medium`}>\n              {product.name}\n            </li>\n          </ol>\n        </nav>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* Product Image */}\n          <div className=\"aspect-square overflow-hidden rounded-lg\">\n            <img\n              src={product.image_url}\n              alt={product.name}\n              className=\"w-full h-full object-cover object-top\"\n            />\n          </div>\n\n          {/* Product Info */}\n          <div className=\"space-y-6\">\n            <div>\n              <span className={`inline-block text-sm font-medium px-3 py-1 rounded-full ${\n                isDarkMode ? 'bg-blue-900 text-blue-200' : 'bg-blue-100 text-blue-800'\n              } mb-4`}>\n                {product.part_code}\n              </span>\n              <h1 className={`text-3xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\n                {product.name}\n              </h1>\n              <p className={`text-lg ${isDarkMode ? 'text-gray-300' : 'text-gray-600'} mb-6`}>\n                {product.description}\n              </p>\n            </div>\n\n            <div className=\"border-t border-b py-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <span className={`text-3xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                  ₺{product.price.toLocaleString('tr-TR')}\n                </span>\n                <div className={`text-sm ${product.stock > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                  {product.stock > 0 ? `${product.stock} adet stokta` : 'Stokta yok'}\n                </div>\n              </div>\n\n              {product.stock > 0 && (\n                <div className=\"flex items-center space-x-4 mb-6\">\n                  <label className={`text-sm font-medium ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                    Miktar:\n                  </label>\n                  <div className=\"flex items-center border rounded-lg\">\n                    <button\n                      onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                      className={`px-3 py-2 ${isDarkMode ? 'text-gray-300 hover:text-white hover:bg-gray-700' : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'}`}\n                    >\n                      <i className=\"ri-subtract-line\"></i>\n                    </button>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      max={product.stock}\n                      value={quantity}\n                      onChange={(e) => setQuantity(Math.min(product.stock, Math.max(1, parseInt(e.target.value) || 1)))}\n                      className={`w-16 text-center py-2 border-0 ${isDarkMode ? 'bg-gray-800 text-white' : 'bg-white text-gray-900'} focus:ring-0`}\n                    />\n                    <button\n                      onClick={() => setQuantity(Math.min(product.stock, quantity + 1))}\n                      className={`px-3 py-2 ${isDarkMode ? 'text-gray-300 hover:text-white hover:bg-gray-700' : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'}`}\n                    >\n                      <i className=\"ri-add-line\"></i>\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              <button\n                onClick={handleAddToCart}\n                disabled={product.stock <= 0}\n                className={`w-full py-3 px-6 rounded-lg font-medium transition-colors ${\n                  product.stock > 0\n                    ? 'bg-blue-600 hover:bg-blue-700 text-white'\n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                }`}\n              >\n                <i className=\"ri-shopping-cart-line mr-2\"></i>\n                {product.stock > 0 ? 'Sepete Ekle' : 'Stokta Yok'}\n              </button>\n            </div>\n\n            {/* Product Features */}\n            <div className=\"space-y-4\">\n              <h3 className={`text-lg font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                Ürün Özellikleri\n              </h3>\n              <ul className={`space-y-2 text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                <li className=\"flex items-center\">\n                  <i className=\"ri-check-line text-green-500 mr-2\"></i>\n                  Orijinal kalitede üretim\n                </li>\n                <li className=\"flex items-center\">\n                  <i className=\"ri-check-line text-green-500 mr-2\"></i>\n                  2 yıl garanti\n                </li>\n                <li className=\"flex items-center\">\n                  <i className=\"ri-check-line text-green-500 mr-2\"></i>\n                  Hızlı teslimat\n                </li>\n                <li className=\"flex items-center\">\n                  <i className=\"ri-check-line text-green-500 mr-2\"></i>\n                  Ücretsiz kargo (500₺ üzeri)\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ProductDetailPage","id","useParams","isDarkMode","addToCart","useStore","product","setProduct","useState","quantity","setQuantity","loading","setLoading","useEffect","fetchProduct","data","error","supabase","toast","handleAddToCart","i","jsx","jsxs","Link","e"],"mappings":"kFAkBA,SAAwBA,GAAoB,CAC1C,KAAM,CAAE,GAAAC,CAAA,EAAOC,EAAA,EACT,CAAE,WAAAC,EAAY,UAAAC,CAAA,EAAcC,EAAA,EAC5B,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAyB,IAAI,EACrD,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,CAAC,EACpC,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAI,EAE3CK,EAAAA,UAAU,IAAM,CACVZ,GACFa,EAAA,CAEJ,EAAG,CAACb,CAAE,CAAC,EAEP,MAAMa,EAAe,SAAY,CAC/B,GAAI,CACF,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAC3B,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,KAAMhB,CAAE,EACX,OAAA,EAEH,GAAIe,EAAO,MAAMA,EACjBT,EAAWQ,CAAI,CACjB,OAASC,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9CE,EAAM,MAAM,iBAAiB,CAC/B,QAAA,CACEN,EAAW,EAAK,CAClB,CACF,EAEMO,EAAkB,IAAM,CAC5B,GAAKb,EAEL,IAAIA,EAAQ,OAAS,EAAG,CACtBY,EAAM,MAAM,2BAA2B,EACvC,MACF,CAEA,GAAIT,EAAWH,EAAQ,MAAO,CAC5BY,EAAM,MAAM,0CAA0C,EACtD,MACF,CAEA,QAASE,EAAI,EAAGA,EAAIX,EAAUW,IAC5BhB,EAAU,CACR,GAAIE,EAAQ,GACZ,UAAWA,EAAQ,UACnB,KAAMA,EAAQ,KACd,MAAOA,EAAQ,MACf,UAAWA,EAAQ,UACnB,MAAOA,EAAQ,KAAA,CAChB,EAGHY,EAAM,QAAQ,GAAGT,CAAQ,2BAA2B,EACtD,EAEA,OAAIE,QAEC,MAAA,CAAI,UAAW,gBAAgBR,EAAa,cAAgB,UAAU,QACrE,SAAAkB,EAAAA,IAAC,OAAI,UAAU,yCACb,eAAC,MAAA,CAAI,UAAU,gBACb,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAA,CAAuC,EACtDC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAAA,CAAgC,EAC/CA,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAAA,CAAgC,EAC/CA,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAAA,CAAgC,EAC/CC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,yBAAA,CAA0B,EACzCA,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAAA,CAAgC,EAC/CA,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAAA,CAAgC,CAAA,CAAA,CACjD,CAAA,CAAA,CACF,CAAA,EACF,CAAA,CACF,EACF,EACF,EAICf,EAmBHe,EAAAA,IAAC,MAAA,CAAI,UAAW,gBAAgBlB,EAAa,cAAgB,UAAU,QACrE,SAAAmB,OAAC,MAAA,CAAI,UAAU,yCAEb,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,OACb,SAAAC,EAAAA,KAAC,KAAA,CAAG,UAAU,sCACZ,SAAA,CAAAD,EAAAA,IAAC,KAAA,CACC,SAAAA,EAAAA,IAACE,EAAA,CAAK,GAAG,IAAI,UAAW,GAAGpB,EAAa,iCAAmC,mCAAmC,GAAI,SAAA,WAAA,CAElH,EACF,EACAkB,EAAAA,IAAC,KAAA,CACC,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAW,yBAAyBlB,EAAa,gBAAkB,eAAe,EAAA,CAAI,CAAA,CAC3F,EACAkB,EAAAA,IAAC,KAAA,CACC,SAAAA,EAAAA,IAACE,EAAA,CAAK,GAAG,YAAY,UAAW,GAAGpB,EAAa,iCAAmC,mCAAmC,GAAI,mBAE1H,EACF,EACAkB,EAAAA,IAAC,KAAA,CACC,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAW,yBAAyBlB,EAAa,gBAAkB,eAAe,EAAA,CAAI,CAAA,CAC3F,EACAkB,EAAAA,IAAC,MAAG,UAAW,GAAGlB,EAAa,aAAe,eAAe,eAC1D,SAAAG,EAAQ,IAAA,CACX,CAAA,CAAA,CACF,CAAA,CACF,EAEAgB,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAKf,EAAQ,UACb,IAAKA,EAAQ,KACb,UAAU,uCAAA,CAAA,EAEd,EAGAgB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAW,2DACflB,EAAa,4BAA8B,2BAC7C,QACG,WAAQ,SAAA,CACX,EACAkB,EAAAA,IAAC,MAAG,UAAW,sBAAsBlB,EAAa,aAAe,eAAe,QAC7E,SAAAG,EAAQ,IAAA,CACX,EACAe,EAAAA,IAAC,KAAE,UAAW,WAAWlB,EAAa,gBAAkB,eAAe,QACpE,SAAAG,EAAQ,WAAA,CACX,CAAA,EACF,EAEAgB,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,QAAK,UAAW,sBAAsBnB,EAAa,aAAe,eAAe,GAAI,SAAA,CAAA,IAClFG,EAAQ,MAAM,eAAe,OAAO,CAAA,EACxC,QACC,MAAA,CAAI,UAAW,WAAWA,EAAQ,MAAQ,EAAI,iBAAmB,cAAc,GAC7E,WAAQ,MAAQ,EAAI,GAAGA,EAAQ,KAAK,eAAiB,YAAA,CACxD,CAAA,EACF,EAECA,EAAQ,MAAQ,GACfgB,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAD,EAAAA,IAAC,SAAM,UAAW,uBAAuBlB,EAAa,aAAe,eAAe,GAAI,SAAA,SAAA,CAExF,EACAmB,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAD,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMX,EAAY,KAAK,IAAI,EAAGD,EAAW,CAAC,CAAC,EACpD,UAAW,aAAaN,EAAa,mDAAqD,qDAAqD,GAE/I,SAAAkB,EAAAA,IAAC,IAAA,CAAE,UAAU,kBAAA,CAAmB,CAAA,CAAA,EAElCA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,IAAKf,EAAQ,MACb,MAAOG,EACP,SAAWe,GAAMd,EAAY,KAAK,IAAIJ,EAAQ,MAAO,KAAK,IAAI,EAAG,SAASkB,EAAE,OAAO,KAAK,GAAK,CAAC,CAAC,CAAC,EAChG,UAAW,kCAAkCrB,EAAa,yBAA2B,wBAAwB,eAAA,CAAA,EAE/GkB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMX,EAAY,KAAK,IAAIJ,EAAQ,MAAOG,EAAW,CAAC,CAAC,EAChE,UAAW,aAAaN,EAAa,mDAAqD,qDAAqD,GAE/I,SAAAkB,EAAAA,IAAC,IAAA,CAAE,UAAU,aAAA,CAAc,CAAA,CAAA,CAC7B,CAAA,CACF,CAAA,EACF,EAGFC,EAAAA,KAAC,SAAA,CACC,QAASH,EACT,SAAUb,EAAQ,OAAS,EAC3B,UAAW,6DACTA,EAAQ,MAAQ,EACZ,2CACA,8CACN,GAEA,SAAA,CAAAe,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAAA,CAA6B,EACzCf,EAAQ,MAAQ,EAAI,cAAgB,YAAA,CAAA,CAAA,CACvC,EACF,EAGAgB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAD,EAAAA,IAAC,MAAG,UAAW,yBAAyBlB,EAAa,aAAe,eAAe,GAAI,SAAA,kBAAA,CAEvF,SACC,KAAA,CAAG,UAAW,qBAAqBA,EAAa,gBAAkB,eAAe,GAChF,SAAA,CAAAmB,EAAAA,KAAC,KAAA,CAAG,UAAU,oBACZ,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAA,CAAoC,EAAI,0BAAA,EAEvD,EACAC,EAAAA,KAAC,KAAA,CAAG,UAAU,oBACZ,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAA,CAAoC,EAAI,eAAA,EAEvD,EACAC,EAAAA,KAAC,KAAA,CAAG,UAAU,oBACZ,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAA,CAAoC,EAAI,gBAAA,EAEvD,EACAC,EAAAA,KAAC,KAAA,CAAG,UAAU,oBACZ,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAA,CAAoC,EAAI,6BAAA,CAAA,CAEvD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAvJEA,EAAAA,IAAC,MAAA,CAAI,UAAW,gBAAgBlB,EAAa,cAAgB,UAAU,QACrE,SAAAmB,OAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAD,EAAAA,IAAC,MAAG,UAAW,sBAAsBlB,EAAa,aAAe,eAAe,QAAS,SAAA,iBAAA,CAEzF,EACAkB,EAAAA,IAACE,EAAA,CACC,GAAG,IACH,UAAU,uIACX,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CA6IN"}